SET SERVEROUTPUT ON
DECLARE
C_CUSTOMER_NAME customer.first_name%type;
C_CUSTOMER_SURNAME customer.surname%type;
C_DESCRIPTION COIN_DELIVERY.DELIVERY_NOTES%type;
C_PRICE COIN.PRICE%TYPE;
C_PRODUCT COIN.PRODUCT%TYPE;
CURSOR C_COIN_CURSOR IS
SELECT FIRST_NAME, SURNAME, PRODUCT, PRICE, DELIVERY_NOTES
FROM INVOICE IV
JOIN CUSTOMER C ON C.CUSTOMER_ID = IV.CUSTOMER_ID
JOIN COIN C ON CC.COIN_ID = IV.COIN_ID
JOIN COIN_DELIVERY D ON D.DELIVERY_ID = IV.DELIVERY_ID
WHERE P.PRICE <= 8000
ORDER BY P.PRICE ;
BEGIN
OPEN C_COIN_CURSOR;
LOOP
FETCH C_COIN_CURSOR
INTO C_CUSTOMER_NAME, C_CUSTOMER_SURNAME, C_PRODUCT, C_PRICE, C_DESCRIPTION;
EXIT WHEN C_COIN_CURSOR%NOTFOUND;
DBMS_OUTPUT.PUT_LINE('CUSTOMER: ' || C_CUSTOMER_NAME || ' '|| C_CUSTOMER_SURNAME);
DBMS_OUTPUT.PUT_LINE('COIN: ' || C_PRODUCT);
DBMS_OUTPUT.PUT_LINE('PRICE: R' || C_PRICE);
DBMS_OUTPUT.PUT_LINE('NOTES: ' || C_DESCRIPTION);
DBMS_OUTPUT.PUT_LINE('------------------------');
END LOOP;
